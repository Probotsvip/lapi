<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader API - Professional Documentation</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i data-feather="video" class="me-2"></i>
                YouTube Downloader API
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#overview">Overview</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#endpoints">Endpoints</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#testing">Live Testing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#examples">Examples</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">
                        Professional YouTube Downloader API
                    </h1>
                    <p class="lead mb-4">
                        Fast, reliable, and feature-rich API for downloading YouTube videos with 
                        advanced caching, Telegram storage, and privacy protection.
                    </p>
                    <div class="d-flex gap-3">
                        <a href="#testing" class="btn btn-primary btn-lg">
                            <i data-feather="play-circle" class="me-2"></i>
                            Try Live Demo
                        </a>
                        <a href="#endpoints" class="btn btn-outline-light btn-lg">
                            <i data-feather="book" class="me-2"></i>
                            View Documentation
                        </a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="feature-grid">
                        <div class="feature-card">
                            <i data-feather="zap" class="feature-icon"></i>
                            <h5>3-Tier Caching</h5>
                            <p>Memory → MongoDB → API for ultra-fast responses</p>
                        </div>
                        <div class="feature-card">
                            <i data-feather="shield" class="feature-icon"></i>
                            <h5>AES Encryption</h5>
                            <p>Secure decryption of protected content</p>
                        </div>
                        <div class="feature-card">
                            <i data-feather="send" class="feature-icon"></i>
                            <h5>Telegram Storage</h5>
                            <p>Permanent file storage via Telegram</p>
                        </div>
                        <div class="feature-card">
                            <i data-feather="eye-off" class="feature-icon"></i>
                            <h5>URL Masking</h5>
                            <p>Privacy protection with proxy URLs</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Overview Section -->
    <section id="overview" class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <h2 class="section-title">API Overview</h2>
                    <div class="overview-stats row g-4">
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="totalRequests">-</div>
                                <div class="stat-label">Total Requests</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="cacheHitRate">-</div>
                                <div class="stat-label">Cache Hit Rate</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="telegramUploads">-</div>
                                <div class="stat-label">Telegram Uploads</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="uptime">-</div>
                                <div class="stat-label">Uptime</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Endpoints Section -->
    <section id="endpoints" class="py-5">
        <div class="container">
            <h2 class="section-title">API Endpoints</h2>
            
            <!-- Video Info Endpoint -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <code>/api/video-info</code>
                    <span class="endpoint-description">Get video metadata</span>
                </div>
                <div class="endpoint-body">
                    <h6>Request Body:</h6>
                    <pre><code>{
  "url": "https://youtu.be/VIDEO_ID"
}</code></pre>
                    
                    <h6>Response:</h6>
                    <pre><code>{
  "success": true,
  "cached": false,
  "response_time": 1.23,
  "data": {
    "video_id": "VIDEO_ID",
    "title": "Video Title",
    "duration": "3:45",
    "thumbnail": "https://...",
    "uploader": "Channel Name",
    "view_count": 1000000
  }
}</code></pre>
                </div>
            </div>

            <!-- Download Endpoint -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <code>/api/download</code>
                    <span class="endpoint-description">Get download links</span>
                </div>
                <div class="endpoint-body">
                    <h6>Request Body:</h6>
                    <pre><code>{
  "url": "https://youtu.be/VIDEO_ID",
  "quality": "1080p",
  "format": "video"
}</code></pre>
                    
                    <h6>Response:</h6>
                    <pre><code>{
  "success": true,
  "cached": false,
  "response_time": 2.45,
  "data": {
    "title": "Video Title",
    "quality": "1080p",
    "url": "https://download.link",
    "masked_url": "/api/proxy/uuid/filename.mp4",
    "telegram_url": "https://t.me/...",
    "permanent_storage": true,
    "file_size_estimate": "45.2 MB"
  }
}</code></pre>
                </div>
            </div>

            <!-- Proxy Endpoint -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <code>/api/proxy/&lt;id&gt;/&lt;filename&gt;</code>
                    <span class="endpoint-description">Masked download URLs</span>
                </div>
                <div class="endpoint-body">
                    <p>Privacy-protected download URLs that redirect to the actual file.</p>
                    <p><strong>Example:</strong> <code>/api/proxy/abc123/video.mp4</code></p>
                </div>
            </div>

            <!-- Stats Endpoint -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="http-method get">GET</span>
                    <code>/api/stats</code>
                    <span class="endpoint-description">System statistics</span>
                </div>
                <div class="endpoint-body">
                    <h6>Response:</h6>
                    <pre><code>{
  "success": true,
  "data": {
    "uptime_seconds": 3600,
    "uptime_human": "1:00:00",
    "requests_total": 150,
    "cache_hits": 45,
    "cache_hit_rate": 30.0,
    "telegram_uploads": 12,
    "active_requests": 2
  }
}</code></pre>
                </div>
            </div>

            <!-- Cache Clear Endpoint -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="http-method post">POST</span>
                    <code>/api/cache/clear</code>
                    <span class="endpoint-description">Clear application cache</span>
                </div>
                <div class="endpoint-body">
                    <h6>Response:</h6>
                    <pre><code>{
  "success": true,
  "message": "Cache cleared successfully. 25 items removed."
}</code></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- Live Testing Section -->
    <section id="testing" class="py-5">
        <div class="container">
            <h2 class="section-title">Live API Testing</h2>
            
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="testing-panel">
                        <div class="mb-4">
                            <label for="testUrl" class="form-label">YouTube URL:</label>
                            <input type="url" class="form-control" id="testUrl" 
                                   placeholder="https://youtu.be/VIDEO_ID or https://youtube.com/watch?v=VIDEO_ID">
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="testQuality" class="form-label">Quality:</label>
                                <select class="form-select" id="testQuality">
                                    <option value="auto">Auto (Best Available)</option>
                                    <option value="1080p">1080p</option>
                                    <option value="720p">720p</option>
                                    <option value="480p">480p</option>
                                    <option value="360p">360p</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="testFormat" class="form-label">Format:</label>
                                <select class="form-select" id="testFormat">
                                    <option value="video">Video</option>
                                    <option value="audio">Audio Only</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-3 mb-4">
                            <button class="btn btn-primary" id="btnGetInfo">
                                <i data-feather="info" class="me-2"></i>
                                Get Video Info
                            </button>
                            <button class="btn btn-success" id="btnDownload">
                                <i data-feather="download" class="me-2"></i>
                                Get Download Link
                            </button>
                            <button class="btn btn-outline-secondary" id="btnClearCache">
                                <i data-feather="trash-2" class="me-2"></i>
                                Clear Cache
                            </button>
                        </div>
                        
                        <!-- Loading Spinner -->
                        <div class="loading-spinner d-none" id="loadingSpinner">
                            <div class="spinner-border text-primary me-3" role="status"></div>
                            <span>Processing request...</span>
                        </div>
                        
                        <!-- Results -->
                        <div class="test-results" id="testResults"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples Section -->
    <section id="examples" class="py-5">
        <div class="container">
            <h2 class="section-title">Code Examples</h2>
            
            <div class="row">
                <div class="col-lg-6">
                    <h4>Python (Requests)</h4>
                    <pre><code class="language-python">import requests

# Get video info
response = requests.post('http://localhost:5000/api/video-info', 
    json={'url': 'https://youtu.be/VIDEO_ID'})
data = response.json()

if data['success']:
    print(f"Title: {data['data']['title']}")
    print(f"Duration: {data['data']['duration']}")

# Download video
response = requests.post('http://localhost:5000/api/download',
    json={
        'url': 'https://youtu.be/VIDEO_ID',
        'quality': '720p',
        'format': 'video'
    })
data = response.json()

if data['success']:
    download_url = data['data']['url']
    print(f"Download: {download_url}")
</code></pre>
                </div>
                
                <div class="col-lg-6">
                    <h4>JavaScript (Fetch)</h4>
                    <pre><code class="language-javascript">// Get video info
const getVideoInfo = async (url) => {
    const response = await fetch('/api/video-info', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ url })
    });
    
    const data = await response.json();
    if (data.success) {
        console.log('Title:', data.data.title);
        console.log('Duration:', data.data.duration);
    }
};

// Download video
const downloadVideo = async (url, quality = 'auto') => {
    const response = await fetch('/api/download', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            url,
            quality,
            format: 'video'
        })
    });
    
    const data = await response.json();
    if (data.success) {
        window.open(data.data.url);
    }
};
</code></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>YouTube Downloader API</h5>
                    <p class="mb-0">Professional video downloading service with advanced features.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Built with Flask, MongoDB Atlas, and modern web technologies.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    
    <!-- Initialize Feather Icons -->
    <script>feather.replace()</script>
</body>
</html>
